### 概述

Linux 为了支持不同的文件系统，就需要一个抽象层将具体文件系统的细节屏蔽掉，只要文件系统的实现能遵循一定的规则，就能和这个抽象层顺利配合，并且抽象层对外提供统一的操作接口，让用户空间无论操作哪个文件系统都只需要作出一样的操作，这个抽象层就是虚拟文件系统 --- VFS。

---

### VFS 支持的文件系统类型

- 基于磁盘的文件系统
  - Linux：Ext2, Ext3, Ext4, ReiserFS 等
  - Unix 文件系统的变种：sysv, UFS
  - 微软文件系统：MS-DOS, VFAT
  - ISO9660 CD-ROM 文件系统和 DVD 文件系统
- 基于网络的文件系统
  - NFS
- 特殊文件系统
  - /proc

> 第一二种都是管理块设备的文件系统，第三种则不是

---

### VFS 4 大组成对象

- **superblock**：超级块。表示某个加载的文件系统
- **inode**：索引节点。表示某个文件
- **dentry**：目录项。表示路径的一个组成部分
- **file**：文件对象。表示被某个进程打开的一个文件

> 这些对象都是存放于内存当中

#### superblock

superblock 用于存放文件系统的信息，比如文件系统类型、设备标识符等，这个对象对应着文件系统中的超级块，但是文件系统中的超级块是存放于磁盘当中。superblock 的成员变量由结构 `struct super_block` 表示，操作函数则由 `super_operations` 结构体表示，都是定义在文件include/linux/fs.h中，操作函数主要提供对文件系统和 inode 的管理，比如增删 inode，同步 VFS 和 FS 之间的数据等。

