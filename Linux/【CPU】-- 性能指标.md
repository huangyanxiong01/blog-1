### <font color=#00b0f0>CPU 工作原理</font>

先直观感受下 CPU 的样子：

![](https://raw.githubusercontent.com/hsxhr-10/picture/master/cpu%E7%BB%93%E6%9E%84%E5%9B%BE1.jpg)

![](https://raw.githubusercontent.com/hsxhr-10/picture/master/cpu%E7%BB%93%E6%9E%84%E5%9B%BE2.jpg)

三大组成部分：

- 控制单元
- 算术/逻辑单元
- 寄存器单元

工作过程：

```
1、在数字脉冲信号的作用下，控制单元将程序计数器 (PC) 中的待处理指令地址发送到总线接口，总线接口通过系统总线转发到 I/O 桥，
   再从 I/O 桥出发通过内存总系，到达主存储器 (内存)，从内存中读取指令，沿路返回并将指令存储在寄存器单元中。
2、在执行指令的过程中如果需要数据，同样按照 1 中描述的顺序将数据地址送达内存并读取，然后将读取到的数据存储在寄存器单元中。
3、通过算术/逻辑单元对数据进行处理。
4、周而复始
```

如下图红框所示：

![](https://raw.githubusercontent.com/hsxhr-10/picture/master/cpu%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.png)

### <font color=#00b0f0>CPU 性能指标</font>

- 主频：指的是每秒能发出的数字脉冲次数，单位是 MHz/GHz。比如主频 800MHz 的 CPU 能在每秒发出一亿次的数字脉冲 (100 * 1000 * 1000)，主频的数值越大，相当于 CPU 从 PC 中读取地址的速度越快，所以也可以约等于 CPU 越快。不过这里有个陷阱，就是主频仅仅是参考数值，实际上会有低频的实际速度大于等于高频的情况
- 字长：指的是 CPU 每秒能处理多少位的二进制数据。比如一个装有 64 位 CPU 的服务器应该要配合 64 位的操作系统才能发挥 CPU 最大的效率
- 前端总线频率 (FSB)：指的是每秒能和内存交换数据的大小，单位是 MHz。FSB 决定着数据带宽，数据带宽 = FSB * 字长 / 8，比如 FSB 是 800MHz 且字长是 64 bit 的 CPU 所能撑起的数据带宽是 800 * 64 / 8 / 1000 = 6.4G，也就是该 CPU 每秒能跟内存交换 6.4G 的数据
- 核芯数
   - 物理核：看得见摸得着的硬件核芯，可以通过 `cat /proc/cpuinfo | grep 'physical id' | uniq | sort | wc -l` 
   - 超线程：一个核当多个核使 (两个以上)
   - 逻辑核：通常逻辑核个数等于物理核个数，但是通过超线程技术使得逻辑上的核心数增加，可以通过 `cat /proc/cpuinfo | grep 'process' | uniq | sort | wc -l` 查看，通过对比物理核跟逻辑核的关系，可以推断出 CPU 是否支持超线程
- 三级缓存
   - L1 Cache：容量最小，制作成本最高，效率最高，大概几百 KB
   - L2 Cache：容量次之，对于多核芯 CPU 来说，每个核单独拥有二级缓存，且不共享，L2 Cache 等于每个核的二级缓存之和
   - L3 Cache：容量最大，对于多核芯 CPU 来说，每个核共享三级缓存
- TODO：外频、倍频系数、流水线
