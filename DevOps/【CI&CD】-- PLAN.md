# 导引

本文通过一个实际的例子来讨论步骤 PLAN 的细节，看如何将停留在想法上的需求落地。

# 方法

## 描述

为了突出重点，这个例子必须足够简单而且完整，这里就以投票功能为例子。

- 需求描述：一个投票系统，假设任何人都可以对每一位候选人进行投票，系统统计每个候选人的得票数，并显示出来
- 交互描述：有两个页面，一个是投票页面，包含单选框的表单；另一个是候选人得票数页面，`<ul>` 和 `<li>` 组成的列表。默认显示候选人得票数页面，点击投票按钮跳转投票页面进行投票，投票完成提交表单，跳转回得票数页面

几个事先声明的点：

- 假设这个投票系统的页面是服务端渲染的，跳转也是服务端控制
- 列表中的数据从另外一个可信任的数据源处导入
- 先不考虑恶意刷票这些问题
- 单元测试用于偏向非业务的代码；接口测试用于偏向业务逻辑的代码

## 步骤

### 1. 流程图

根据描述可以初步完成流程图，演示如下：

![](https://raw.githubusercontent.com/hsxhr-10/picture/master/plan1.png)

这个流程图用什么工具画并不重要，团队内部协商好用什么就行，个人认为用笔和纸画最爽，不过保存麻烦罢了 (手绘画板笑而不语)。重要的是在初步完成这个流程图之后需要确认以下几点：

- 是否漏了方块 (也就是操作步骤)？
- 是否漏了棱形 (也就是分支条件)？
- 已有的方块和棱形是否有错误？

流程图重点是具现化需求的整体情况，同时确保需求的逻辑没有明显的遗漏，一些细节问题 (无论是业务还是技术)，比如得票数列表需要分页吗？需要分多少页？表单需要验证得多细？可以等到细节说明这一步去梳理。当然实际操作起来这两步也不是非得分得很清，往往是边梳理流程图，边讨论细节，这时候就需要同时整理好细节说明了。

### 2. 细节说明

根据流程图就可以进行细节说明的梳理了，梳理的结果最好以文档的形式出来，假设叫【投票系统】-- 细节说明.md。

编辑【投票系统】-- 细节说明.md：

\# 得票数页面

- 需要分页，20 条记录为一页
- 过滤掉非党员的人 (滑稽)

\# 投票页面

- 空表单直接 alert 警告，无需发起 HTTP

最理想的状态是能在最终的代码实现中，比较容易地跟这些细节说明一一对应起来，这无论对于后期的维护或是工作交接来说都是莫大的帮助。

### 3. 技术会议/讨论 (非必须)

有了【投票系统】-- 细节说明.md，就可以扎实地开技术会议了，不至于以**大家理解都不一致为前提去讨论如何实现**。可以进一步编辑【投票系统】-- 细节说明.md：

\# 得票数页面

- 需要分页，20 条记录为一页  --> 将分页功能抽象成函数 A；偏非业务，需要单元测试，而且之后的分页都应该使用函数 A，也无需对分页重复测试，只需确保函数 A 有被测试到
- 过滤掉非党员的人 (滑稽)   --> 函数 B；偏业务，需要接口测试

\# 投票页面

- 空表单直接 alert 警告，无需发起 HTTP  --> 函数 C；偏非业务，需要单元测试

考虑到实际情况，如果这些细节都以文档形式落地的话，编写和后期维护的工作量都比较大，特别是对于精致的团队来说。所以可以在技术会议时，负责相关模块的人员自己记录下来，这还有个好处，就是这些细节自己写、记录往往会更好理解，就是经常说的别人看不懂，只有自己看得懂。

数据建模 (不一定有)

### 4. 初步看到可优化点

# 结果
