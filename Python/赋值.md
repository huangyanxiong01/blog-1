å‰å‡ å¤©è¢«é—®åˆ° `copy` å’Œ `deepcopy` çš„åŒºåˆ«ï¼Œæ¯•ç«Ÿç°åœ¨å·²ç»ä¸åƒåˆšæ¯•ä¸šæ—¶å€™é‚£æ ·è¿™ä¹ˆçº ç»“è¿™äº›è¯­æ³•ç»†èŠ‚äº†ï¼Œç°åœ¨æ›´å…³æ³¨æµ‹è¯•åšå¾—æ€æ ·ï¼Œä»£ç è§„èŒƒå¦‚ä½•è¿™äº›é—®é¢˜... æ‰€ä»¥ä¸€æ—¶é—´ç­”ä¸ä¸Šæ¥ğŸ˜…ï¼Œä»Šå¤©ç‰¹æ„æŠŠ py èµ‹å€¼å¸¸ç”¨çš„ç‚¹æ¡èµ·æ¥ï¼Œé¡ºä¾¿åšä¸ªç¬”è®°å§ã€‚

### å…ˆè¯´ç»“è®º

- å¼•ç”¨èµ‹å€¼çš„å˜é‡éƒ½æŒ‡å‘åŒä¸€å—å†…å­˜åœ°å€ï¼Œç›´åˆ°é‡æ–°èµ‹å€¼
- å˜é‡çš„å€¼æ˜¯éåµŒå¥—çš„å•å±‚ç®€å•ç±»å‹æ—¶ï¼Œå¼•ç”¨èµ‹å€¼ / `copy` / `deepcopy` æ²¡åŒºåˆ«
- å˜é‡å€¼æ˜¯åµŒå¥—çš„å¤æ‚ç±»å‹æ—¶
  - åˆå§‹åŒ–åçš„å˜é‡ id ä¸ç›¸åŒ
  - `copy` å˜é‡çš„åµŒå¥—éƒ¨åˆ†ä¼šéšç€åŸå˜é‡è€Œæ”¹å˜ï¼Œè€Œ `deepcopy` å˜é‡åˆ™ä¸ä¼š
  - `copy` å˜é‡çš„éåµŒå¥—éƒ¨åˆ†ä¸ä¼šéšç€åŸå˜é‡è€Œæ”¹å˜

### å¼•ç”¨èµ‹å€¼

```
In [88]: var1 = 1

In [89]: var2 = var1

In [90]: id(var1)
Out[90]: 4344811552

In [91]: id(var2)
Out[91]: 4344811552

In [92]: var1 is var2
Out[92]: True
```

ä¸Šé¢æ˜¯å¹³æ—¶ç”¨çš„æœ€å¤šçš„å¼•ç”¨èµ‹å€¼æ“ä½œï¼Œå½“åˆšå®Œæˆèµ‹å€¼å `var1` å’Œ `var2` çš„ id æ˜¯ç›¸åŒçš„ã€‚

```
In [93]: var1 = "rrr"

In [94]: id(var1)
Out[94]: 4378003192

In [95]: id(var2)
Out[95]: 4344811552

In [96]: var1 is var2
Out[96]: False
```

å½“ `var1` é‡æ–°è¢«èµ‹å€¼åï¼Œ`var1` å®é™…ä¸Šæ˜¯é‡æ–°æŒ‡å‘äº†å¦å¤–ä¸€å—å†…å­˜äº†ã€‚

### copy å’Œ deepcopy

```
In [97]: var1 = 1

In [98]: var2 = copy.copy(var1)

In [99]: var3 = copy.deepcopy(var1)

In [100]: id(var1)
Out[100]: 4344811552

In [101]: id(var2)
Out[101]: 4344811552

In [102]: id(var3)
Out[102]: 4344811552

In [103]: var1 is var2 is var3
Out[103]: True
```

```
In [104]: var1 = "rrr"

In [106]: id(var1)
Out[106]: 4378005152

In [107]: id(var2)
Out[107]: 4344811552

In [108]: id(var3)
Out[108]: 4344811552

In [105]: var1 is var2 is var3
Out[105]: False
```

å¯ä»¥çœ‹åˆ°å’Œå¼•ç”¨èµ‹å€¼å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ä¸Šé¢ä¾‹å­å˜é‡çš„å€¼éƒ½æ˜¯ç®€å•çš„ç±»å‹ï¼Œä¸‹é¢å†æ¥çœ‹çœ‹å½“å˜é‡çš„å€¼æ˜¯è¾ƒå¤æ‚çš„ç±»å‹æ—¶çš„æƒ…å†µã€‚

```
In [132]: var1 = [1, 2, [3, 4]]

In [133]: var2 = copy.copy(var1)

In [134]: var3 = copy.deepcopy(var1)

In [135]: id(var1)
Out[135]: 4379533064

In [136]: id(var2)
Out[136]: 4378768072

In [137]: id(var3)
Out[137]: 4379502152

In [138]: var1 is var2 is var3
Out[138]: False
```

åˆå§‹åŒ–åçš„ id ä¸ç›¸åŒã€‚

```
In [139]: var1[2][0] = "rrr"

In [140]: id(var1)
Out[140]: 4379533064

In [141]: id(var2)
Out[141]: 4378768072

In [142]: id(var3)
Out[142]: 4379502152

In [146]: var1 is var2 is var3
Out[146]: False

In [143]: var1
Out[143]: [1, 2, ['rrr', 4]]

In [144]: var2
Out[144]: [1, 2, ['rrr', 4]]

In [145]: var3
Out[145]: [1, 2, [3, 4]]
```

å¯ä»¥çœ‹åˆ°å½“å€¼æ˜¯åµŒå¥—çš„ list æ—¶ï¼Œ`copy` å˜é‡çš„åµŒå¥—éƒ¨åˆ†éšç€åŸå˜é‡çš„æ”¹å˜è€Œæ”¹å˜äº†ã€‚

```
In [147]: var1[0] = "yyy"

In [148]: var1
Out[148]: ['yyy', 2, ['rrr', 4]]

In [149]: var2
Out[149]: [1, 2, ['rrr', 4]]

In [150]: var3
Out[150]: [1, 2, [3, 4]]
```

éåµŒå¥—éƒ¨åˆ†åˆ™ä¸ä¼šéšç€åŸå˜é‡çš„æ”¹å˜è€Œæ”¹å˜ã€‚

ğŸ––



